---

apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: cronjob-node0
  namespace: dev
spec:
  schedule: "0 8,12 * * 0-6" # daily at 12 pm GMT == 11 pm AEST <Mins> <HourinGMT> <DayofMonth> <Month> <DayofWeek> Ex run 1 pm GMT every monday * 13 * * 1
  jobTemplate:
      spec:
        template:
          spec:
            tolerations:
              - key: nodename
                operator: Equal
                value: cronjob-node0
                effect: NoSchedule
            containers:
            - name: cronjob-node0
              image: azfsbkpacr.azurecr.io/az-fs-bkp:20200108_31fb775ff11343aa14a763c113f6a232617ebdf9
              env:
              - name: nodenumber
                value: cronjob-node0
              imagePullPolicy: Always
              volumeMounts:          
              - name: dacredsvolume
                mountPath: /etc/dacreds
            volumes:
            - name: dacredsvolume
              secret:
                secretName: spn-creds
            restartPolicy: OnFailure
---

apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: cronjob-node1
  namespace: dev
spec:
  schedule: "0 6,12 * * 0-6" # daily at 12 pm GMT == 11 pm AEST <Mins> <HourinGMT> <DayofMonth> <Month> <DayofWeek> Ex run 1 pm GMT every monday * 13 * * 1
  jobTemplate:
      spec:
        template:
          spec:
            tolerations:
              - key: nodename
                operator: Equal
                value: cronjob-node1
                effect: NoSchedule
            containers:
            - name: cronjob-node1
              image: azfsbkpacr.azurecr.io/az-fs-bkp:20200108_31fb775ff11343aa14a763c113f6a232617ebdf9
              env:
              - name: nodenumber
                value: cronjob-node1
              imagePullPolicy: Always
              volumeMounts:          
              - name: dacredsvolume
                mountPath: /etc/dacreds
            volumes:
            - name: dacredsvolume
              secret:
                secretName: spn-creds
            restartPolicy: OnFailure
---
